{% extends 'RotisCourseMakerBundle::layout.html.twig' %}

{% block title %}CoursesMaker - PageEquipe{% endblock %}
{% block div %}
    <h1>Edition</h1>
{% endblock %}
{% block content %}   

<h1>Informations sur l'Equipe {{ equipe.username }} </h1>
{# TODO: ajouter des champs pour paiement et papiers #}

<p>{{ equipe.username }} <br />
   {% if equipe.valide %}
       Valide
   {% else %}
       Pas encore valide
   {% endif %} <br />
   {{ equipe.course.nom }} <br />
   {{ equipe.categorie.nom }} <br />
   {{ equipe.course.type.nom }} <br />
   Nombre de coureurs {{ nombre }} <br />

    <br />
    {% if is_granted('ROLE_ADMIN') %}
        <p><a class="btn" href="{{ path('admin_edit', { 'id': equipe.id }) }}">Editer l'équipe &raquo;</a></p>
    {% endif %}
    <br />
       <table>
           <thead>
           <tr>
               <td>Prenom</td>
               <td>Nom</td>
               <td>Email</td>
               <td>Telephone</td>
               <td>Statut</td>
               <td>T-Shirt</td>
               <td>Papiers</td>
               <td>Paiement</td>
           </tr>
           </thead>
           <tbody>
           <tr>
               {% for joueurs in equipe.joueurs %}
               <tr>
               <td>{{ joueurs.prenom }}</td>
               <td>{{ joueurs.nom }}</td>
               <td>{{ joueurs.email }}</td>
               <td>{{ joueurs.telephone }}</td>
                   {% if joueurs.getEtudiant() %}
                       <td>Etudiant</td>
                   {% else %}
                       <td>Pas Etudiant</td>
                   {% endif %}
               <td>{{ joueurs.getTailleTshirt }}</td>
                   {%  if joueurs.getPapiersOk() %}
                       <td>Certificat médical reçu</td>
                   {% else %}
                       <td>En attente du certificat médical</td>
                   {% endif %}
                   {% if joueurs.getPaiementOk() %}
                       <td>Paiement Validé</td>
                   {% else %}
                       <td>En attente de paiement</td>
                   {% endif %}
               </tr>
               {% endfor %}
                <td></td>
           </tr>
           </tbody>
       </table>

{# TODO:CSS le tableau #}

<br />
    </p>

    {% if equipe.categorie.nom != 'Solo' or nombre < 1 %}
        {% if equipe.categorie.nom != 'Equipe' or nombre < 3 %}
            {% if equipe.categorie.nom != 'Loisir' or nombre < 12 %}
        <div class="row-fluid">
            <div class="offset1 span10">

                <form action="{{ path('edit', {'id': equipe.id })}}" method="post" {{ form_enctype(form) }} class="well">
                {{ form_widget(form) }}
                <br />
                    <input type="submit" class="btn btn-primary"/>
                </form>
            </div>
        </div>

    {% else %}
    Equipe complete!
    {% endif %}
    {% else %}
        Equipe complete!
    {% endif %}
    {% else %}
        Equipe complete!
    {% endif %}

<!-- Le javascript
   ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
{% endblock %}
